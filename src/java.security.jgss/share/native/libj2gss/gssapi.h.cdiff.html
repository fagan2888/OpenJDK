<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="cache-control" content="no-cache"></meta>
<meta http-equiv="Content-Type" content="text/xhtml;charset=utf-8"></meta>
<meta http-equiv="Pragma" content="no-cache"></meta>
<meta http-equiv="Expires" content="-1"></meta>
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
span.chmod {
    font-size: 0.7em;
    color: #db7800;
}
a.print { font-size: x-small; }
a:hover { background-color: #ffcc99; }
</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>ws Cdiff src/java.security.jgss/share/native/libj2gss/gssapi.h</title>
</head>
<body id="SUNWwebrev">
        <a class="print" href="javascript:print()">Print this page</a>
<pre>Add JGSS JNI bindings for gss cred store functions
Add createCredential() with password
Also avoid memory allocation in newGSSOIDSet() renamed to makeGSSOIDset()
which now takes a singleton set argument and either assigns the requested
OID or with SPNEGO returns a static list of all the supported mechs. With
this we no longer need deleteGSSOIDSet().
Add getLocalName() GSSName method</pre>
        <pre>
<hr></hr><span class="oldmarker">*** 117,126 ****</span>
<span class="newmarker">--- 117,139 ----</span>
   * For now, define a QOP-type as an OM_uint32
   */
  typedef OM_uint32       gss_qop_t;
  typedef int             gss_cred_usage_t;
  
<span class="new">+ /* Credential store extensions */</span>
<span class="new">+ typedef struct gss_key_value_element_struct {</span>
<span class="new">+     const char *key;</span>
<span class="new">+     const char *value;</span>
<span class="new">+ } gss_key_value_element_desc;</span>
<span class="new">+ </span>
<span class="new">+ typedef struct gss_key_value_set_struct {</span>
<span class="new">+     OM_uint32 count; /* should be size_t, but for MIT compat */</span>
<span class="new">+     gss_key_value_element_desc *elements;</span>
<span class="new">+ } gss_key_value_set_desc, *gss_key_value_set_t;</span>
<span class="new">+ </span>
<span class="new">+ typedef const gss_key_value_set_desc *gss_const_key_value_set_t;</span>
<span class="new">+ </span>
  /*
   * Flag bits for context-level services.
   */
  #define GSS_C_DELEG_FLAG 1
  #define GSS_C_MUTUAL_FLAG 2
<hr></hr><span class="oldmarker">*** 697,706 ****</span>
<span class="newmarker">--- 710,745 ----</span>
  
  #if TARGET_OS_MAC
  #    pragma pack(pop)
  #endif
  
<span class="new">+ /* Common extension (NOT in RFC2744) */</span>
<span class="new">+ OM_uint32</span>
<span class="new">+ gss_add_cred_with_password(</span>
<span class="new">+         OM_uint32 *,            /* minor_status */</span>
<span class="new">+         gss_const_cred_id_t,    /* input_cred_handle */</span>
<span class="new">+         gss_const_name_t,       /* desired_name */</span>
<span class="new">+         gss_const_OID,          /* desired_mech */</span>
<span class="new">+         gss_const_buffer_t,     /* password */</span>
<span class="new">+         gss_cred_usage_t,       /* cred_usage */</span>
<span class="new">+         OM_uint32,              /* initiator_time_req */</span>
<span class="new">+         OM_uint32,              /* acceptor_time_req */</span>
<span class="new">+         gss_cred_id_t *,        /* output_cred_handle */</span>
<span class="new">+         gss_OID_set *,          /* actual_mechs */</span>
<span class="new">+         OM_uint32 *,            /* initiator_time_rec */</span>
<span class="new">+         OM_uint32 *             /* acceptor_time_rec */</span>
<span class="new">+ );</span>
<span class="new">+ </span>
<span class="new">+ /* Common extension for aname2lname (NOT in RFC2744) */</span>
<span class="new">+ OM_uint32</span>
<span class="new">+ gss_localname(</span>
<span class="new">+         OM_uint32 *,            /* minor_status */</span>
<span class="new">+         gss_const_name_t,       /* name */</span>
<span class="new">+         gss_OID,                /* mech_type */</span>
<span class="new">+         gss_buffer_t            /* localname */</span>
<span class="new">+ );</span>
<span class="new">+ </span>
  #ifdef __cplusplus
  }
  #endif
  
  #endif /* _GSSAPI_H_ */
</pre></body></html>

