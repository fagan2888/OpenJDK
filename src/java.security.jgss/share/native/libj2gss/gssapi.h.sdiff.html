<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="cache-control" content="no-cache"></meta>
<meta http-equiv="Content-Type" content="text/xhtml;charset=utf-8"></meta>
<meta http-equiv="Pragma" content="no-cache"></meta>
<meta http-equiv="Expires" content="-1"></meta>
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
span.chmod {
    font-size: 0.7em;
    color: #db7800;
}
a.print { font-size: x-small; }
a:hover { background-color: #ffcc99; }
</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>ws Sdiff src/java.security.jgss/share/native/libj2gss/gssapi.h</title>
</head><body id="SUNWwebrev">
<a class="print" href="javascript:print()">Print this page</a>
<pre>Add JGSS JNI bindings for gss cred store functions
Add createCredential() with password
Also avoid memory allocation in newGSSOIDSet() renamed to makeGSSOIDset()
which now takes a singleton set argument and either assigns the requested
OID or with SPNEGO returns a static list of all the supported mechs. With
this we no longer need deleteGSSOIDSet().
Add getLocalName() GSSName method</pre>

<table><tr valign="top">
<td><pre>

</pre><hr></hr><pre>
 102       size_t length;
 103       void *value;
 104 } gss_buffer_desc, *gss_buffer_t;
 105 typedef const gss_buffer_desc * gss_const_buffer_t;
 106 
 107 typedef struct gss_channel_bindings_struct {
 108       OM_uint32 initiator_addrtype;
 109       gss_buffer_desc initiator_address;
 110       OM_uint32 acceptor_addrtype;
 111       gss_buffer_desc acceptor_address;
 112       gss_buffer_desc application_data;
 113 } *gss_channel_bindings_t;
 114 typedef const struct gss_channel_bindings_struct *gss_const_channel_bindings_t;
 115 
 116 /*
 117  * For now, define a QOP-type as an OM_uint32
 118  */
 119 typedef OM_uint32       gss_qop_t;
 120 typedef int             gss_cred_usage_t;
 121 













 122 /*
 123  * Flag bits for context-level services.
 124  */
 125 #define GSS_C_DELEG_FLAG 1
 126 #define GSS_C_MUTUAL_FLAG 2
 127 #define GSS_C_REPLAY_FLAG 4
 128 #define GSS_C_SEQUENCE_FLAG 8
 129 #define GSS_C_CONF_FLAG 16
 130 #define GSS_C_INTEG_FLAG 32
 131 #define GSS_C_ANON_FLAG 64
 132 #define GSS_C_PROT_READY_FLAG 128
 133 #define GSS_C_TRANS_FLAG 256
 134 #define GSS_C_DELEG_POLICY_FLAG 32768
 135 
 136 /*
 137  * Credential usage options
 138  */
 139 #define GSS_C_BOTH 0
 140 #define GSS_C_INITIATE 1
 141 #define GSS_C_ACCEPT 2

</pre><hr></hr><pre>
 681 );
 682 
 683 /* New for V2 */
 684 GSS_DLLIMP OM_uint32 gss_duplicate_name(
 685         OM_uint32  *,           /* minor_status */
 686         gss_const_name_t,       /* input_name */
 687         gss_name_t *            /* dest_name */
 688 );
 689 
 690 /* New for V2 */
 691 GSS_DLLIMP OM_uint32 gss_canonicalize_name(
 692         OM_uint32  *,           /* minor_status */
 693         gss_const_name_t,       /* input_name */
 694         gss_const_OID,          /* mech_type */
 695         gss_name_t *            /* output_name */
 696 );
 697 
 698 #if TARGET_OS_MAC
 699 #    pragma pack(pop)
 700 #endif


























 701 
 702 #ifdef __cplusplus
 703 }
 704 #endif
 705 
 706 #endif /* _GSSAPI_H_ */
</pre></td><td><pre>

</pre><hr></hr><pre>
 102       size_t length;
 103       void *value;
 104 } gss_buffer_desc, *gss_buffer_t;
 105 typedef const gss_buffer_desc * gss_const_buffer_t;
 106 
 107 typedef struct gss_channel_bindings_struct {
 108       OM_uint32 initiator_addrtype;
 109       gss_buffer_desc initiator_address;
 110       OM_uint32 acceptor_addrtype;
 111       gss_buffer_desc acceptor_address;
 112       gss_buffer_desc application_data;
 113 } *gss_channel_bindings_t;
 114 typedef const struct gss_channel_bindings_struct *gss_const_channel_bindings_t;
 115 
 116 /*
 117  * For now, define a QOP-type as an OM_uint32
 118  */
 119 typedef OM_uint32       gss_qop_t;
 120 typedef int             gss_cred_usage_t;
 121 
<span class="new"> 122 /* Credential store extensions */</span>
<span class="new"> 123 typedef struct gss_key_value_element_struct {</span>
<span class="new"> 124     const char *key;</span>
<span class="new"> 125     const char *value;</span>
<span class="new"> 126 } gss_key_value_element_desc;</span>
<span class="new"> 127 </span>
<span class="new"> 128 typedef struct gss_key_value_set_struct {</span>
<span class="new"> 129     OM_uint32 count; /* should be size_t, but for MIT compat */</span>
<span class="new"> 130     gss_key_value_element_desc *elements;</span>
<span class="new"> 131 } gss_key_value_set_desc, *gss_key_value_set_t;</span>
<span class="new"> 132 </span>
<span class="new"> 133 typedef const gss_key_value_set_desc *gss_const_key_value_set_t;</span>
<span class="new"> 134 </span>
 135 /*
 136  * Flag bits for context-level services.
 137  */
 138 #define GSS_C_DELEG_FLAG 1
 139 #define GSS_C_MUTUAL_FLAG 2
 140 #define GSS_C_REPLAY_FLAG 4
 141 #define GSS_C_SEQUENCE_FLAG 8
 142 #define GSS_C_CONF_FLAG 16
 143 #define GSS_C_INTEG_FLAG 32
 144 #define GSS_C_ANON_FLAG 64
 145 #define GSS_C_PROT_READY_FLAG 128
 146 #define GSS_C_TRANS_FLAG 256
 147 #define GSS_C_DELEG_POLICY_FLAG 32768
 148 
 149 /*
 150  * Credential usage options
 151  */
 152 #define GSS_C_BOTH 0
 153 #define GSS_C_INITIATE 1
 154 #define GSS_C_ACCEPT 2

</pre><hr></hr><pre>
 694 );
 695 
 696 /* New for V2 */
 697 GSS_DLLIMP OM_uint32 gss_duplicate_name(
 698         OM_uint32  *,           /* minor_status */
 699         gss_const_name_t,       /* input_name */
 700         gss_name_t *            /* dest_name */
 701 );
 702 
 703 /* New for V2 */
 704 GSS_DLLIMP OM_uint32 gss_canonicalize_name(
 705         OM_uint32  *,           /* minor_status */
 706         gss_const_name_t,       /* input_name */
 707         gss_const_OID,          /* mech_type */
 708         gss_name_t *            /* output_name */
 709 );
 710 
 711 #if TARGET_OS_MAC
 712 #    pragma pack(pop)
 713 #endif
<span class="new"> 714 </span>
<span class="new"> 715 /* Common extension (NOT in RFC2744) */</span>
<span class="new"> 716 OM_uint32</span>
<span class="new"> 717 gss_add_cred_with_password(</span>
<span class="new"> 718         OM_uint32 *,            /* minor_status */</span>
<span class="new"> 719         gss_const_cred_id_t,    /* input_cred_handle */</span>
<span class="new"> 720         gss_const_name_t,       /* desired_name */</span>
<span class="new"> 721         gss_const_OID,          /* desired_mech */</span>
<span class="new"> 722         gss_const_buffer_t,     /* password */</span>
<span class="new"> 723         gss_cred_usage_t,       /* cred_usage */</span>
<span class="new"> 724         OM_uint32,              /* initiator_time_req */</span>
<span class="new"> 725         OM_uint32,              /* acceptor_time_req */</span>
<span class="new"> 726         gss_cred_id_t *,        /* output_cred_handle */</span>
<span class="new"> 727         gss_OID_set *,          /* actual_mechs */</span>
<span class="new"> 728         OM_uint32 *,            /* initiator_time_rec */</span>
<span class="new"> 729         OM_uint32 *             /* acceptor_time_rec */</span>
<span class="new"> 730 );</span>
<span class="new"> 731 </span>
<span class="new"> 732 /* Common extension for aname2lname (NOT in RFC2744) */</span>
<span class="new"> 733 OM_uint32</span>
<span class="new"> 734 gss_localname(</span>
<span class="new"> 735         OM_uint32 *,            /* minor_status */</span>
<span class="new"> 736         gss_const_name_t,       /* name */</span>
<span class="new"> 737         gss_OID,                /* mech_type */</span>
<span class="new"> 738         gss_buffer_t            /* localname */</span>
<span class="new"> 739 );</span>
 740 
 741 #ifdef __cplusplus
 742 }
 743 #endif
 744 
 745 #endif /* _GSSAPI_H_ */
</pre></td>
</tr></table>
</body></html>
